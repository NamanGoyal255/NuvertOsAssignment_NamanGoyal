{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, inject } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthService } from '../auth.service';\nlet CompoundsComponent = class CompoundsComponent {\n  constructor() {\n    this.Math = Math;\n    this.http = inject(HttpClient);\n    this.route = inject(ActivatedRoute);\n    this.router = inject(Router);\n    this.authService = inject(AuthService);\n    this.compounds = [];\n    this.isLoading = true;\n    this.errorMessage = '';\n    this.page = 1;\n    this.total = 0;\n    this.pageSize = 10; // Assume page size (update if different)\n  }\n\n  ngOnInit() {\n    this.route.queryParams.subscribe(params => {\n      this.page = +params['page'] || 1;\n      this.fetchCompounds();\n    });\n  }\n  fetchCompounds() {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    this.isLoading = true;\n    this.http.get(`http://localhost:3000/compounds?page=${this.page}`, {\n      headers\n    }).subscribe({\n      next: res => {\n        this.compounds = res.data;\n        this.total = res.total;\n        this.isLoading = false;\n      },\n      error: err => {\n        this.errorMessage = err.error?.message || 'Failed to load compounds';\n        this.isLoading = false;\n      }\n    });\n  }\n  prevPage() {\n    if (this.page > 1) {\n      this.page--;\n      this.updateUrlAndFetch();\n    }\n  }\n  nextPage() {\n    // Calculate max page count\n    const maxPage = Math.ceil(this.total / this.pageSize);\n    if (this.page < maxPage) {\n      this.page++;\n      this.updateUrlAndFetch();\n    }\n  }\n  updateUrlAndFetch() {\n    // Update URL query params and fetch compounds for new page\n    this.router.navigate([], {\n      relativeTo: this.route,\n      queryParams: {\n        page: this.page\n      },\n      queryParamsHandling: 'merge'\n    });\n    this.fetchCompounds();\n  }\n  goToCompound(id) {\n    this.router.navigate(['/compound', id]);\n  }\n};\nCompoundsComponent = __decorate([Component({\n  selector: 'app-compounds',\n  templateUrl: './compounds.component.html',\n  styleUrls: ['./compounds.component.css']\n})], CompoundsComponent);\nexport { CompoundsComponent };","map":{"version":3,"mappings":"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","names":["Component","inject","HttpClient","HttpHeaders","ActivatedRoute","Router","AuthService","CompoundsComponent","constructor","Math","ngOnInit","route","queryParams","subscribe","params","page","fetchCompounds","token","authService","getToken","headers","set","isLoading","http","get","next","res","compounds","data","total","error","err","errorMessage","message","prevPage","updateUrlAndFetch","nextPage","maxPage","ceil","pageSize","router","navigate","relativeTo","queryParamsHandling","goToCompound","id","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["E:\\Naman_NuvertOs\\NuvertOsAssignment_NamanGoyal\\Frontend\\src\\app\\services\\compounds\\compounds.component.ts"],"sourcesContent":["import { Component, inject, OnInit } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthService } from '../auth.service';\n\n@Component({\n  selector: 'app-compounds',\n  templateUrl: './compounds.component.html',\n  styleUrls: ['./compounds.component.css']\n})\nexport class CompoundsComponent implements OnInit {\n  Math = Math;\n\n  private http = inject(HttpClient);\n  private route = inject(ActivatedRoute);\n  private router = inject(Router);\n  private authService = inject(AuthService);\n\n  compounds: Compound[] = [];\n  isLoading = true;\n  errorMessage = '';\n  page = 1;\n  total = 0;\n  pageSize = 10; // Assume page size (update if different)\n\n  ngOnInit() {\n    this.route.queryParams.subscribe(params => {\n      this.page = +params['page'] || 1;\n      this.fetchCompounds();\n    });\n  }\n\n  fetchCompounds() {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n\n    this.isLoading = true;\n    this.http.get<{ data: Compound[], total: number }>(\n      `http://localhost:3000/compounds?page=${this.page}`,\n      { headers }\n    ).subscribe({\n      next: (res) => {\n        this.compounds = res.data;\n        this.total = res.total;\n        this.isLoading = false;\n      },\n      error: (err) => {\n        this.errorMessage = err.error?.message || 'Failed to load compounds';\n        this.isLoading = false;\n      }\n    });\n  }\n\n  prevPage() {\n    if (this.page > 1) {\n      this.page--;\n      this.updateUrlAndFetch();\n    }\n  }\n\n  nextPage() {\n    // Calculate max page count\n    const maxPage = Math.ceil(this.total / this.pageSize);\n    if (this.page < maxPage) {\n      this.page++;\n      this.updateUrlAndFetch();\n    }\n  }\n\n  updateUrlAndFetch() {\n    // Update URL query params and fetch compounds for new page\n    this.router.navigate([], {\n      relativeTo: this.route,\n      queryParams: { page: this.page },\n      queryParamsHandling: 'merge',\n    });\n    this.fetchCompounds();\n  }\n\n  goToCompound(id: number) {\n    this.router.navigate(['/compound', id]);\n  }\n}\n\ninterface Compound {\n  id: number;\n  name: string;\n  image: string;\n  description: string;\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}